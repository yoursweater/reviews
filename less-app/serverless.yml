service: review-app
provider:
  name: aws
  runtime: nodejs8.10
  iamRoleStatements:
  - Effect: Allow
    Action:
      - dynamodb:PutItem
      - dynamodb:Scan
      - dynamodb:DeleteItem
      - dynamodb:UpdateItem
    Resource: arn:aws:dynamodb:us-east-1:589745751216:table/restaurantreviews

functions:
  createReview:
    handler: create.run
    events:        
    - http:            
        path: reviews           
        method: post
        cors: true
  removeReview:
    handler: remove.run
    events:        
    - http:            
        path: reviews           
        method: delete
        cors: true
  retrieveReview:
    handler: retrieve.run
    events:        
    - http:            
        path: reviews           
        method: get
        cors: true
  swapReview:
    handler: swap.run
    events:        
    - http:            
        path: reviews           
        method: put
        cors: true
resources:   
  Resources:     
    ReviewTable:       
      Type: 'AWS::DynamoDB::Table'       
      Properties:        
        TableName: restaurantreviews        
        AttributeDefinitions:           
          -             
            AttributeName: id             
            AttributeType: S         
        KeySchema:           
          -             
            AttributeName: id             
            KeyType: HASH         
        ProvisionedThroughput:            
          ReadCapacityUnits: 1           
          WriteCapacityUnits: 1
