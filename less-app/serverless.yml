service: review-app
provider:
  name: aws
  runtime: nodejs8.10
  iamRoleStatements:
  - Effect: Allow
    Action:
      - dynamodb:PutItem
      - dynamodb:Scan
      - dynamodb:DeleteItem
      - dynamodb:UpdateItem
    Resource: '*'

functions:
  createReview:
    handler: create.run
    events:        
    - http:            
        path: reviews           
        method: post
        cors: true
  danAdd:
    handler: danadd.run
    events:        
    - http:            
        path: dantable           
        method: post
        cors: true
  danGet:
    handler: danget.run
    events:        
    - http:            
        path: danget           
        method: get
        cors: true
  danDelete:
    handler: dandelete.run
    events:        
    - http:            
        path: dandelete           
        method: delete
        cors: true
  mayAdd:
    handler: mayadd.run
    events:        
    - http:            
        path: mayadd           
        method: post
        cors: true
  mayGet:
    handler: mayget.run
    events:        
    - http:            
        path: mayget           
        method: get
        cors: true
  mayDelete:
    handler: maydelete.run
    events:        
    - http:            
        path: maydelete           
        method: delete
        cors: true
  removeReview:
    handler: remove.run
    events:        
    - http:            
        path: reviews           
        method: delete
        cors: true
  retrieveReview:
    handler: retrieve.run
    events:        
    - http:            
        path: reviews           
        method: get
        cors: true
  swapReview:
    handler: swap.run
    events:        
    - http:            
        path: reviews           
        method: put
        cors: true
resources:   
  Resources:     
    ReviewTable:       
      Type: 'AWS::DynamoDB::Table'       
      Properties:        
        TableName: restaurantreviews        
        AttributeDefinitions:           
          - AttributeName: id             
            AttributeType: S         
        KeySchema:           
          - AttributeName: id             
            KeyType: HASH         
        ProvisionedThroughput:            
          ReadCapacityUnits: 1           
          WriteCapacityUnits: 1    
    DanTable:       
      Type: 'AWS::DynamoDB::Table'       
      Properties:        
        TableName: dantable        
        AttributeDefinitions:           
          - AttributeName: id             
            AttributeType: S         
        KeySchema:           
          - AttributeName: id             
            KeyType: HASH         
        ProvisionedThroughput:            
          ReadCapacityUnits: 1           
          WriteCapacityUnits: 1
    MayTable:       
      Type: 'AWS::DynamoDB::Table'       
      Properties:        
        TableName: maytable        
        AttributeDefinitions:           
          - AttributeName: id             
            AttributeType: S         
        KeySchema:           
          - AttributeName: id             
            KeyType: HASH         
        ProvisionedThroughput:            
          ReadCapacityUnits: 1           
          WriteCapacityUnits: 1
